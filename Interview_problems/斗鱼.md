# 斗鱼

本文档记录我所参加的斗鱼面试的面试题目。

## 实习一面

- 构造函数、析构函数调用虚函数问题
- 虚函数、构造函数、析构函数
- 元编程
- `type_trait`的理解
- 迭代器的作用
- 使用模板实现类型`int`判断
- `shared_ptr`原理和实现
- `std::forward`的作用
- C语言中变长参数的实现原理
- 为什么系统调用比普通函数调用消耗大？
- 网络协议栈的理解
- 服务器启动到接受连接的整过过程索调用的函数
- TCP可靠性
- TIME_WAIT的作用
- Linux操作熟悉吗？
- gdb

## 实习二面

- 自我介绍
- 元编程
- 构造函数、析构函数调用虚函数问题
- 可以直接交换两个同类型对象的内存数据吗？
- c++ 11中union的变量可以为非POD类型吗？
- 右值引用的理解
- lamda表达式的实现原理，变量捕获
- enable_shared_from_this
- vector扩容策略，其他库的策略，对比
- map、unordered_map的区别、使用场景
- 口述算法思路：二叉树最长路径
- epoll水平触发好边缘触发，对应fd的处理问题（这里讨论了比较久）
- 多个进程共享一个epollfd，会有什么问题？
- 半/全连接攻击
- syn泛洪攻击、syn cookie
- CLOSE_WAIT过多，怎么处理
- 出现丢包的情况，服务端发现重复ack，在socket层面的表现是？可以通过什么函数获取到对应的信息？
- 一个进程可以打开的fd有限，到并发量很大的时候，fd耗尽了，怎么办？
- 有没有了解其他开源网络库？
- 了解协程网络库吗？
- 提问环节

## 实现三面

- 介绍项目和强项
- 自己觉得最好的项目
- 项目的线程模型
- IO线程开多少个？策略？
- 直播的过程，从主播到服务器再到用户，请设计这个过程的方案？
- 直播业务，服务器一对多（可能会上百万），服务器压力很大，设计方案？
- CDN（上一题提到CDN）原理
- 虚拟内存的作用
- 未来3-5年的规划
- 提问环节

## 秋招提前批一面（40min）

- 自我介绍
- os中堆和栈的区别
- 如何实现一个只能在栈上分配的对象？

- 如何实现一个只能在堆上分配的对象？
- 内联函数和宏定义的区别
- 内联函数可以是虚函数吗
- vector可以存引用吗
- 智能指针
- 编程题：
  - leetcode two sum
  - 改成 n sum，有 n 个整数的和等于 target，找出来
- 提问环节

## 秋招提前批二面（60min）

- 实习内容
- 项目难点
- 服务端不调用`accept`，客户端的`connect`调用返回什么？（从三次握手和`connect`、`accept`的关系分析）
- 如果有大量这样的链接呢？（半连接队列、全连接队列）
- 压测，在测短连接的时候，有没有出现socket不够用的情况？什么原因？怎么解决存在大量 time_wait 的问题？
- 参考过哪些开源项目
- 拥塞控制？bbr？
- 可靠的udp算法
- 了解数据库吗？（不熟悉）
- 了解的数据库的锁有哪些？
- `vector`的`begin()`、`end()`、`rbegin()`、`rend()`的关系
- 提问环节

## 秋招提前批hr面（30min）

- 自我介绍
- 实习内容、收获
- 最有成就感的项目
- 有什么优势
- 使用三个词描述自己的性格
- 有没有女朋友
- 投了哪些公司和进度
- 期望薪资
- 提问环节