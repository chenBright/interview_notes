# static 的存储方式

静态数据成员要在程序一开始运行时就必须存在，因为函数在程序运行中被调用，所以静态数据成员不能在任何函数内分配空间和初始化。 这样，它的空间分配有三个可能的地方：

- 作为类的外部接口的头文件，那里有类声明；
- 是类定义的内部实现，那里有类的成员函数定义；
- 是应用程序的main()函数前的全局数据声明和定义处。

静态数据成员要实际地分配空间，故不能在类的声明中定义（只能声明数据成员）。类声明只声明一个类的“尺寸和规格”，并不进行实际的内存分配， 所以在类声明中定义是错误的，一般需要在类外初始化, 除了下面几种情况:

- ***inline static***: 可以在类内初始化
- ***const static***: 可以在类内初始化
- ***constexpr static LiteralType***: 必须在类内初始化

它也不能在头文件中类声明的外部定义，因为那会造成在多个使用该类的源文件中，对其重复定义。

`static`被引入以告知编译器，将变量存储在程序的***静态存储区***而非栈上空间，静态数据成员按定义出现的先后顺序依次初始化，注意静态成员嵌套时， 要保证所嵌套的成员已经初始化了。消除时的顺序是初始化的反顺序。

# static 的作用

- 隐藏：在一个文件中定义的`static`变量或者函数，在其他源文件中无法访问，实现了对其他源文件的隐藏，因此可以在不同的源文件使用同名的变量或者函数。
- 变量内容持久：静态局部变量在程序的生命周期内只分配一次，在第一次调用该语句时被初始化，以后执行该语句时不再初始化。并且从 C++ 11 开始, 这是***线程安全***的。
- 默认初始化为 0：`static`变量的声明默认值是 0（NULL）。

# static 成员变量

参考[C++ Static关键字的用法说明](http://guozet.me/post/C++-Static-keyword/)。

`static`成员变量需要在**类定义体外**进行初始化与定义，因为static数据成员独立该类的任意对象存在，**它是与类关联的对象，不与类对象关联**。


# 参考

- [C/C++面试知识点](https://blog.nowcoder.net/n/597b7119c7ff40308fc6f9b59fdb041d)
- [C++ 基础知识总结](https://shengchangjian.github.io/2016/09/C++-basic.html#static)
- [static那些事](https://github.com/Light-City/CPlusPlusThings/tree/master/basic_content/static)
- [C++ Static关键字的用法说明](http://guozet.me/post/C++-Static-keyword/)